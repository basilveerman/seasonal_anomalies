<html>
<head>
<link rel="stylesheet" href="bower_components/jquery-ui/themes/base/jquery-ui.css" />
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
<script src="bower_components/momentjs/min/moment.min.js"></script>
<script src="selectmap.js"></script>
<script>
</script>
<script type="text/javascript">
  window.onload=function(){
  var today = new Date();

  var updateSeasons = function (dateText) {
     var date = moment(dateText);

      // Maps are generated by the 17th of the following month
      // Seasonal are 'complete' by the 17th of the of month following the end of the season
      // Seasons are MAM, JJA, SON, DJF
      var month = date.subtract(16, 'days').month();
      var year = date.subtract(16, 'days').subtract(2, 'months').year(); // This is to display 'Winter 2014' until March 16th.
      var season = getSeasonFromMonth(month);

      $("#yearList").empty();
      var years = getYears(year);
      for (var i = 0; i < years.length; i++) {
        $('<option/>').val(years[i]).html(years[i]).appendTo('#yearList');
      };

      $("#seasList").empty();
      var seasons = getSeasons(season);
      for (i=0;i<seasons.length;i++){
        $('<option/>').val(seasons[i]).html(seasons[i]).appendTo('#seasList');
      };
  }

  var dp = $( "#datepicker" ).datepicker({
    dateFormat: "yy-mm-dd",
    onSelect: function(dateText, datepicker) {
      updateSeasons(dateText);
    }
  });
  dp.datepicker("setDate", today);
  $(".ui-datepicker-current-day").trigger("click");
};
</script>
</head>
<body>

<h2>Select "Today's" Date:</h2>
<p>Date: <input type="text" id="datepicker"></p>

<p>Maps are generated by the 17th of the following month</p>
<p>Seasonal are 'complete' by the 17th of the of month following the end of the season</p>
<P>Seasons are MAM, JJA, SON, DJF</p>
<h2>Resulting Selection options</h2>

<form action="http://www.pacificclimate.org/~fanslow/Files/SCRs/map.php" method="get" target="_blank">
<p>Select year:
<select id="yearList" name="year">
</select>
</p>
<p>
Select season:
<select id="seasList" name="season">
</select>
</p>
<input type="submit" value="Get Maps!"></button>

</form>

<p>




</body>

</html>
